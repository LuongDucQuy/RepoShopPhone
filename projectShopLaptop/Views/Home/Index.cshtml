@model projectShopLaptop.Models.Home.HomeIndexViewModel
@using PagedList;
@using PagedList.Mvc;
@{
    ViewBag.Title = "Trang chủ";
}
@if (TempData["successMessage"] != null)
{
    <div class="toast toast-success">
        @TempData["successMessage"]
    </div>
}
<style>
    .toast {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #4CAF50; /* Màu xanh cho thông báo thành công */
        color: white;
        padding: 25px 50px; /* Thêm padding để thông báo lớn hơn */
        border-radius: 10px; /* Làm tròn các góc */
        font-size: 20px; /* Tăng kích thước font */
        font-weight: bold; /* Làm cho chữ đậm */
        text-align: center; /* Căn giữa chữ trong thông báo */
        z-index: 9999;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Thêm bóng đổ cho thông báo */
    }

    .toast-error {
        background-color: #f44336; /* Màu đỏ cho thông báo lỗi */
    }

    .toast-success {
        background-color: #4CAF50; /* Màu xanh cho thông báo thành công */
    }

    .toast.show {
        opacity: 1;
    }

    .fs-contain {
        position: relative;
        display: inline-block;
        width: 200px; /* Có thể điều chỉnh kích thước */
    }

    .energy-bar {
        width: 100%;
        height: 30px; /* Chiều cao của thanh năng lượng */
        background-color: #f1f1f1;
        border-radius: 5px;
        position: relative;
    }

    .energy-progress {
        height: 100%;
        border-radius: 5px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: background 0.5s ease; /* Thêm hiệu ứng chuyển màu */
    }

    .rq_count {
        font-size: 14px;
        color: #fff;
        font-weight: bold;
        position: absolute;
    }

    .fs-iconfire {
        margin-right: 5px;
    }

    .filter-form {
        position: relative;
    }

    .form-images {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px; /* Điều chỉnh khoảng cách nếu cần */
    }

    .form-image-left, .form-image-right {
        max-width: 100px; /* Kích thước tối đa của ảnh, có thể điều chỉnh */
        height: auto;
    }

</style>
<link href="~/AdminStyle/css/IndexHome.css" rel="stylesheet" />
<!-- Carousel Start -->
<div class="container-fluid mb-3">
    <div class="row px-xl-5">
        <div class="col-lg-8">
            <div id="header-carousel" class="carousel slide carousel-fade mb-30 mb-lg-0" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#header-carousel" data-slide-to="0" class="active"></li>
                    <li data-target="#header-carousel" data-slide-to="1"></li>
                    <li data-target="#header-carousel" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item position-relative active" style="height: 430px;">
                        <img class="position-absolute w-100 h-100" src="~/img/carousel-1.png" style="object-fit: cover;">
                        <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                            <div class="p-3" style="max-width: 700px;">
                                <h1 class="display-4 text-white mb-3 animate__animated animate__fadeInDown">COMING SOON</h1>
                                <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="#">Shop Now</a>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item position-relative" style="height: 430px;">
                        <img class="position-absolute w-100 h-100" src="~/img/carousel-2.jpeg" style="object-fit: cover;">
                        <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                            <div class="p-3" style="max-width: 700px;">
                                <h1 class="display-4 text-white mb-3 animate__animated animate__fadeInDown">COMING SOON</h1>
                                <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="#">Shop Now</a>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item position-relative" style="height: 430px;">
                        <img class="position-absolute w-100 h-100" src="~/img/carousel-3.jpg" style="object-fit: cover;">
                        <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                            <div class="p-3" style="max-width: 700px;">
                                <h1 class="display-4 text-white mb-3 animate__animated animate__fadeInDown">COMING SOON</h1>
                                <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="#">Shop Now</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="product-offer mb-30" style="height: 200px;">
                <img class="img-fluid" src="~/img/offer-1.jpg" alt="">
                <div class="offer-text">
                    <h3 class="text-white mb-3">SPECIAL OFFER</h3>
                    <a href="" class="btn btn-primary">Shop Now</a>
                </div>
            </div>
            <div class="product-offer mb-30" style="height: 200px;">
                <img class="img-fluid" src="~/img/offer-2.jpg" alt="">
                <div class="offer-text">
                    <h3 class="text-white mb-3">BIG SALE</h3>
                    <a href="" class="btn btn-primary">Shop Now</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Carousel End -->
<!-- Featured Start -->
<div class="container-fluid pt-5">
    <div class="row px-xl-5 pb-3">
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                <h1 class="fa fa-check text-primary m-0 mr-3"></h1>
                <h5 class="font-weight-semi-bold m-0">Sản Phẩm Chất Lượng</h5>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                <h1 class="fa fa-shipping-fast text-primary m-0 mr-2"></h1>
                <h5 class="font-weight-semi-bold m-0">Miễn Phí Vận Chuyển</h5>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                <h1 class="fas fa-exchange-alt text-primary m-0 mr-3"></h1>
                <h5 class="font-weight-semi-bold m-0">Đổi Trả Dễ Dàng</h5>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                <h1 class="fa fa-phone-volume text-primary m-0 mr-3"></h1>
                <h5 class="font-weight-semi-bold m-0">24/7 Hỗ Trợ</h5>
            </div>
        </div>
    </div>
</div>
<!-- Featured End -->
<!-- Categories Start -->
<div class="container-fluid pt-5">
    <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4"><span class="bg-secondary pr-3">Danh Mục Sản Phẩm</span></h2>
    <div class="row px-xl-5 pb-3">
        @if (ViewBag.Categories != null)
        {
            foreach (var category in ViewBag.Categories)
            {
                <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
                    <a class="text-decoration-none" href="@Url.Action("ProductOfCategory", "Home", new { id = category.CategoryId })">
                        <div class="cat-item d-flex align-items-center mb-4">
                            <div class="overflow-hidden" style="width: 100px; height: 100px;">
                                <img class="img-fluid" src="@Url.Content("~/img/" + category.CategoryImage)" alt="@category.CategoryImage">
                            </div>
                            <div class="flex-fill pl-3">
                                <h6>@category.CategoryName</h6>
                            </div>
                        </div>
                    </a>
                </div>
            }
        }
        <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
            <a class="text-decoration-none" href="">
                <div class="cat-item img-zoom d-flex align-items-center mb-4">
                    <div class="overflow-hidden d-flex justify-content-center align-items-center" style="width: 100px; height: 100px; margin: auto;">
                        <img class="img-fluid" src="~/img/cat-5.jpg" alt="">
                    </div>
                    <div class="flex-fill pl-3">
                        <h6>MACBOOK</h6>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
            <a class="text-decoration-none" href="">
                <div class="cat-item img-zoom d-flex align-items-center mb-4">
                    <div class="overflow-hidden d-flex justify-content-center align-items-center" style="width: 100px; height: 100px; margin: auto;">
                        <img class="img-fluid" src="~/img/cat-6.jpg" alt="">
                    </div>
                    <div class="flex-fill pl-3">
                        <h6>DELL</h6>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
            <a class="text-decoration-none" href="">
                <div class="cat-item img-zoom d-flex align-items-center mb-4">
                    <div class="overflow-hidden d-flex justify-content-center align-items-center" style="width: 100px; height: 100px; margin: auto;">
                        <img class="img-fluid" src="~/img/cat-7.jpg" alt="">
                    </div>
                    <div class="flex-fill pl-3">
                        <h6>LENOVO</h6>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
            <a class="text-decoration-none" href="">
                <div class="cat-item img-zoom d-flex align-items-center mb-4">
                    <div class="overflow-hidden d-flex justify-content-center align-items-center" style="width: 100px; height: 100px; margin: auto;">
                        <img class="img-fluid" src="~/img/cat-8.jpg" alt="">
                    </div>
                    <div class="flex-fill pl-3">
                        <h6>ASUS</h6>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div>
<!-- Categories End -->
<!-- Filter Form Start -->
<div class="col-lg-4 col-6 mx-auto text-left filter-form">
    <div class="form-images">
        <img src="~/img/label-left.png" alt="Left Image" class="form-image-left">
        <img src="~/img/label-right.png" alt="Right Image" class="form-image-right">
    </div>
    <form method="get" action="@Url.Action("Index", "Home")">
        <!-- Price Filter -->
        <div class="mb-3">
            <label for="priceRange" class="form-label">Giá</label>
            <select name="priceRange" class="form-control" id="priceRange">
                <option value="">Chọn khoảng giá</option>
                <option value="1" @(Request.QueryString["priceRange"] == "1" ? "selected" : "")>Dưới 1 triệu</option>
                <option value="2" @(Request.QueryString["priceRange"] == "2" ? "selected" : "")>1 triệu - 3 triệu</option>
                <option value="3" @(Request.QueryString["priceRange"] == "3" ? "selected" : "")>3 triệu - 5 triệu</option>
                <option value="4" @(Request.QueryString["priceRange"] == "4" ? "selected" : "")>Trên 5 triệu</option>
            </select>
        </div>

        <!-- Category Filter -->
        <div class="mb-3">
            <label for="category" class="form-label">Danh mục</label>
            <select name="category" class="form-control" id="category">
                <option value="">Chọn danh mục</option>
                @if (ViewBag.Categories != null)
                {
                    foreach (var category in ViewBag.Categories)
                    {
                        <option value="@category.CategoryId" @(Request.QueryString["category"] == category.CategoryId.ToString() ? "selected" : "")>@category.CategoryName</option>
                    }
                }
            </select>
        </div>

        <!-- Sort Order Filter -->
        <div class="mb-3">
            <label for="sortOrder" class="form-label">Sắp xếp</label>
            <select name="sortOrder" class="form-control" id="sortOrder">
                <option value="">Chọn sắp xếp</option>
                <option value="name_asc" @(Request.QueryString["sortOrder"] == "name_asc" ? "selected" : "")>Tên A-Z</option>
                <option value="name_desc" @(Request.QueryString["sortOrder"] == "name_desc" ? "selected" : "")>Tên Z-A</option>
                <option value="price_asc" @(Request.QueryString["sortOrder"] == "price_asc" ? "selected" : "")>Giá tăng dần</option>
                <option value="price_desc" @(Request.QueryString["sortOrder"] == "price_desc" ? "selected" : "")>Giá giảm dần</option>
            </select>
        </div>

        <div class="text-center">
            <button type="submit" class="btn">Áp dụng bộ lọc</button>
        </div>
    </form>
</div>
<!-- Filter Form End -->

<div class="container-fluid pt-5 pb-3">
    <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4"><span class="bg-secondary pr-3">Sản Phẩm</span></h2>
    <div class="row px-xl-5">
        @foreach (var item in Model.ListOfProduct)
        {
            if (item.IsActive == true)
            {
                <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
                    <div class="product-item bg-light mb-4">
                        <div class="product-img position-relative overflow-hidden">
                            <img class="img-fluid w-100" src="~/img/@item.ProductImage" alt="">
                            <div class="product-action">
                                @using (Html.BeginForm("proDetail", "detailProduct", FormMethod.Get))
                                {
                                    @Html.Hidden("id", item.ProductId)
                                    <button class="btn btn-outline-dark btn-square"><i class="fa fa-search"></i></button>
                                }
                                @if (item.Quantity > 0)
                                {
                                    <button type="submit" class="btn btn-outline-dark btn-square addToCartBtn"
                                            data-product-id="@item.ProductId">
                                        <i class="fa fa-shopping-cart"></i>
                                    </button>
                                }
                                else
                                {
                                    <p>Not Available</p>
                                }
                            </div>
                        </div>
                        <div class="text-center py-4">
                            <a class="h6 text-decoration-none text-truncate" href="">@item.ProductName</a>
                            <div class="d-flex align-items-center justify-content-center mt-2">
                                <h5>@string.Format(new System.Globalization.CultureInfo("vi-VN"), "{0:C0}", item.Price)</h5>
                            </div>
                            <div class="d-flex align-items-center justify-content-center mb-1">
                                <small class="fa fa-star text-primary mr-1"></small>
                                <small class="fa fa-star text-primary mr-1"></small>
                                <small class="fa fa-star text-primary mr-1"></small>
                                <small class="fa fa-star text-primary mr-1"></small>
                                <small class="fa fa-star text-primary mr-1"></small>
                            </div>
                            <div class="fs-contain">
                                <div class="energy-bar">
                                    <div class="energy-progress" style="width: 100%; background: linear-gradient(90deg, #ffecb3 0%, #ffb200 100%);">
                                        <span class="rq_count fscount">
                                            <img width="15" height="15" src="~/img/flash-sale.png" alt="icon flashsale">
                                            <i class="fs-iconfire"></i>
                                            <b>Còn @item.Quantity/200 suất</b>
                                        </span>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            }
        }
    </div>
</div>
<div class="phanTrang">
    @Html.PagedListPager(Model.ListOfProduct, page => Url.Action("Index", new { page, search = Request.QueryString["search"] }), new PagedListRenderOptions() { Display = PagedListDisplayMode.IfNeeded, DisplayItemSliceAndTotal = true })
</div>
<!-- Products End -->
<!-- Offer Start -->
<div class="container-fluid pt-5 pb-3">
    <div class="row px-xl-5">
        <div class="col-md-6">
            <div class="product-offer mb-30" style="height: 300px;">
                <img class="img-fluid" src="~/img/offer-1.jpg" alt="">
                <div class="offer-text">
                    <a href="" class="btn btn-primary">Shop Now</a>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="product-offer mb-30" style="height: 300px;">
                <img class="img-fluid" src="~/img/offer-2.jpg" alt="">
                <div class="offer-text">
                    <a href="" class="btn btn-primary">Shop Now</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Offer End -->
<!-- Vendor Start -->
<div class="container-fluid py-5">
    <div class="row px-xl-5">
        <div class="col">
            <div class="owl-carousel vendor-carousel">
                <div class="bg-light p-4">
                    <img src="~/img/vendor-1.jpg" alt="">
                </div>
                <div class="bg-light p-4">
                    <img src="~/img/vendor-2.jpg" alt="">
                </div>
                <div class="bg-light p-4">
                    <img src="~/img/vendor-3.jpg" alt="">
                </div>
                <div class="bg-light p-4">
                    <img src="~/img/vendor-4.jpg" alt="">
                </div>
                <div class="bg-light p-4">
                    <img src="~/img/vendor-5.jpg" alt="">
                </div>
                <div class="bg-light p-4">
                    <img src="~/img/vendor-6.jpg" alt="">
                </div>
                <div class="bg-light p-4">
                    <img src="~/img/vendor-7.jpg" alt="">
                </div>
                <div class="bg-light p-4">
                    <img src="~/img/vendor-8.jpg" alt="">
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Vendor End -->
<!-- Footer Start -->
<div class="container-fluid bg-dark text-secondary mt-5 pt-5">
    <div class="row px-xl-5 pt-5">
        <div class="col-lg-4 col-md-12 mb-5 pr-3 pr-xl-5">
            <h5 class="text-secondary text-uppercase mb-4">Hỗ Trợ - Dịch Vụ</h5>
            <p class="mb-4">
                Chính sách và hướng dẫn mua hàng trả góp
                <br> Hướng dẫn mua hàng và chính sách vận chuyển
                <br> Tra cứu đơn hàng
                <br> Chính sách đổi mới và bảo hành
                <br> Dịch vụ bảo hành mở rộng
                <br> Chính sách bảo mật
                <br> Chính sách giải quyết khiếu nại
                <br> Quy chế hoạt động
            </p>
            <p class="mb-2"><i class="fa fa-map-marker-alt text-primary mr-3"></i>123 Street, New York, USA</p>
            <p class="mb-2"><i class="fa fa-envelope text-primary mr-3"></i>luongducquy20041117@gmail.com</p>
            <p class="mb-0"><i class="fa fa-phone-alt text-primary mr-3"></i>+012 345 6789</p>
        </div>
        <div class="col-lg-8 col-md-12">
            <div class="row">
                <div class="col-md-4 mb-5">
                    <h5 class="text-secondary text-uppercase mb-4">Thông Tin Liên Hệ</h5>
                    <div class="d-flex flex-column justify-content-start">
                        <a class="text-secondary mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Thông tin các trang TMĐT</a>
                        <a class="text-secondary mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Khách hàng doanh nghiệp (B2B)</a>
                        <a class="text-secondary mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Tra cứu bảo hành</a>
                    </div>
                </div>
                <div class="col-md-4 mb-5">
                    <h5 class="text-secondary text-uppercase mb-4">Dịch Vụ Và Thông Tin Khác</h5>
                    <div class="d-flex flex-column justify-content-start">
                        <a class="text-secondary mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Chính sách bảo mật thông tin cá nhân</a>
                        <a class="text-secondary mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Chính sách Bảo hành</a>
                        <a class="text-secondary mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Liên hệ hợp tác kinh doanh</a>
                        <a class="text-secondary mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Dịch vụ bảo hành mở rộng</a>
                    </div>
                </div>
                <div class="col-md-4 mb-5">
                    <h5 class="text-secondary text-uppercase mb-4">ĐĂNG KÝ NHẬN KHUYẾN MÃI</h5>
                    <form action="">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Your Email Address">
                            <div class="input-group-append">
                                <button class="btn btn-primary">Sign Up</button>
                            </div>
                        </div>
                    </form>
                    <h6 class="text-secondary text-uppercase mt-4 mb-3">Follow Us</h6>
                    <div class="d-flex">
                        <a class="btn btn-primary btn-square mr-2" href="#"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-primary btn-square mr-2" href="#"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-primary btn-square mr-2" href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a class="btn btn-primary btn-square" href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row border-top mx-xl-5 py-4" style="border-color: rgba(256, 256, 256, .1) !important;">
        <div class="col-md-6 px-xl-0">
            <p class="mb-md-0 text-center text-md-left text-secondary">
                &copy; <a class="text-primary" href="#">Domain</a>. Designed
                by
                <a class="text-primary" href="https://htmlcodex.com">DucQuys</a>
            </p>
        </div>
        <div class="col-md-6 px-xl-0 text-center text-md-right">
            <img class="img-fluid" src="~/img/payments.png" alt="">
        </div>
    </div>
</div>
<!-- Footer End -->
<!-- Back to Top -->
<a href="#" class="btn btn-primary back-to-top"><i class="fa fa-angle-double-up"></i></a>


<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
<script src="~/Content/lib/easing/easing.min.js"></script>
<script src="~/Content/lib/owlcarousel/owl.carousel.min.js"></script>

<!-- Contact Javascript File -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="~/mail/jqBootstrapValidation.min.js"></script>
<script src="~/mail/contact.js"></script>

<!-- Template Javascript -->
<script src="~/Scripts/js1/main.js"></script>

<script>
    $(document).ready(function () {
        // Thêm sản phẩm vào giỏ hàng
        $(".addToCartBtn").click(function () {
            var productId = $(this).data("product-id");

            $.ajax({
                url: '@Url.Action("AddToCart", "Home")',
                method: "POST",
                data: { productId: productId },
                success: function (response) {
                    if (response.success) {
                        Swal.fire(
                            'Thành công!',
                            'Sản phẩm đã được thêm vào giỏ hàng!',
                            'success'
                        );

                        // Cập nhật số lượng giỏ hàng
                        if (response.cartItemCount) {
                            $("#cart-count-value").text(response.cartItemCount);
                        }

                        // Kiểm tra nếu sản phẩm đã tồn tại trong danh sách giỏ hàng
                        var existingItem = $(".dropdown-menu").find(`[data-product-id='${response.product.productId}']`);
                        if (existingItem.length > 0) {
                            var quantityText = existingItem.closest("li").find("span.text-dark");
                            var newQuantity = response.product.quantity;
                            quantityText.text(`${response.product.productName} (${newQuantity})`);
                        } else {
                            var newItemHtml = `
                                <li class="d-flex align-items-center justify-content-between mb-2">
                                    <div class="d-flex align-items-center">
                                        <img src="@Url.Content("~/img/` + response.product.productImage + `")" alt="` + response.product.productName + `" style="width: 40px; height: 40px; object-fit: cover; border-radius: 5px; margin-right: 10px;">
                                        <span class="text-dark">` + response.product.productName + ` (` + response.product.quantity + `)</span>
                                    </div>
                                    <a href="javascript:void(0);" class="text-danger remove-item" data-product-id="` + response.product.productId + `">
                                        <i class="fa fa-times"></i>
                                    </a>
                                </li>`;
                            $(".dropdown-menu").prepend(newItemHtml);
                        }
                    }
                },
                error: function () {
                    Swal.fire(
                        'Lỗi!',
                        'Đã xảy ra lỗi khi thêm sản phẩm vào giỏ hàng.',
                        'error'
                    );
                }
            });
        });

        // Xóa sản phẩm khỏi giỏ hàng
        $(document).on("click", ".remove-item", function () {
            var productId = $(this).data("product-id");
            var listItem = $(this).closest("li");

            $.ajax({
                url: '@Url.Action("RemoveFromCart", "Home")',
                method: "POST",
                data: { productId: productId },
                success: function (response) {
                    if (response.success) {
                        listItem.remove(); // Xóa phần tử khỏi danh sách
                        $("#cart-count-value").text(response.cartItemCount); // Cập nhật số lượng giỏ hàng
                        Swal.fire(
                            'Thành công!',
                            'Sản phẩm đã được xóa khỏi giỏ hàng!',
                            'success'
                        );
                    }
                },
                error: function () {
                    Swal.fire(
                        'Lỗi!',
                        'Đã xảy ra lỗi khi xóa sản phẩm khỏi giỏ hàng.',
                        'error'
                    );
                }
            });
        });
    });
</script>

<script>
    // Kiểm tra xem có thông báo nào cần hiển thị
    window.onload = function () {
        var successToast = document.querySelector('.toast-success');
        var errorToast = document.querySelector('.toast-error');

        // Hiển thị thông báo thành công
        if (successToast) {
            successToast.classList.add('show');
            setTimeout(function () {
                successToast.classList.remove('show');
            }, 3000); // 3 giây
        }
    };
</script>
